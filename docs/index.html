<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horror Story Generator - Histoires d'horreur IA</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üëª Horror Story Generator</h1>
            <p class="subtitle">G√©n√©rez des vid√©os d'histoires d'horreur depuis Reddit avec narration et images IA</p>
        </header>

        <div class="content">
        <main>
            <!-- Section de g√©n√©ration -->
            <section class="generate-section">
                <div class="controls">
                    <button id="generateBtn" class="btn-generate"><span class="btn-icon">üé¨</span> Lire une histoire</button>
                    <button id="diagnoseBtn" class="btn-secondary" title="V√©rifier votre navigateur">ü©∫ Diagnostiquer</button>
                </div>
                <div id="loadingSection" class="loading-section hidden">
                    <div class="loader"></div>
                    <div id="loadingStatus" class="loading-status">
                        <p class="loading-text">Pr√©paration...</p>
                        <div class="progress-steps">
                            <div class="step" data-step="story">
                                <div class="step-icon">üìñ</div>
                                <div class="step-label">R√©cup√©ration histoire</div>
                            </div>
                            <div class="step" data-step="audio">
                                <div class="step-icon">üéôÔ∏è</div>
                                <div class="step-label">Narration IA (navigateur)</div>
                            </div>
                            <div class="step" data-step="slideshow">
                                <div class="step-icon">üñºÔ∏è</div>
                                <div class="step-label">Diaporama des sc√®nes</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section d'affichage de la story -->
            <section id="storySection" class="story-section hidden">
                <div class="story-card">
                    <h2 id="storyTitle" class="story-title"></h2>
                    <div class="story-meta">
                        <span id="storyAuthor" class="story-author"></span>
                        <a id="storyLink" href="#" target="_blank" class="story-link">Voir sur Reddit ‚Üí</a>
                    </div>
                    <div id="storyText" class="story-text"></div>
                </div>
            </section>

            <!-- Section vid√©o -->
            <section id="slideshowSection" class="video-section hidden">
                <div class="video-container">
                    <canvas id="sceneCanvas" width="1280" height="720"></canvas>
                    <div class="video-controls">
                        <button id="recordBtn" class="btn-download">
                            üì• Enregistrer en WebM (exp√©rimental)
                        </button>
                        <button id="newVideoBtn" class="btn-secondary">
                            üîÑ Nouvelle histoire
                        </button>
                    </div>
                       <div class="tts-controls card">
                           <h3>Voix IA</h3>
                           <div class="tts-row">
                               <label>Voix
                                   <select id="voiceSelect"></select>
                               </label>
                               <label>Preset
                                   <select id="tonePreset">
                                       <option value="horror">Horror</option>
                                       <option value="narrator" selected>Narrator</option>
                                       <option value="calm">Calm</option>
                                       <option value="intense">Intense</option>
                                   </select>
                               </label>
                               <label>Vitesse
                                   <input id="voiceRate" type="range" min="0.6" max="1.4" step="0.01" value="0.95" />
                               </label>
                               <label>Pitch
                                   <input id="voicePitch" type="range" min="0.5" max="1.5" step="0.01" value="0.90" />
                               </label>
                               <label>Volume
                                   <input id="voiceVolume" type="range" min="0.5" max="1.0" step="0.01" value="1.0" />
                               </label>
                               <button id="testVoiceBtn" class="secondary">Tester la voix</button>
                           </div>
                           <div class="tts-row">
                               <label class="term-filter"><input type="checkbox" id="autoMatchLang" checked> Adapter √† la langue (FR/EN)</label>
                               <label class="term-filter"><input type="checkbox" id="persistSettings" checked> Sauvegarder les param√®tres</label>
                           </div>
                           <p class="muted">La voix d√©pend des voix disponibles dans votre navigateur/syst√®me.</p>
                       </div>
                    <p class="warning">La narration vocale joue en direct et n'est pas incluse dans l'enregistrement WebM.</p>
                </div>
            </section>

            <!-- Section d'erreur -->
            <section id="errorSection" class="error-section hidden">
                <div class="error-card">
                    <div class="error-icon">‚ö†Ô∏è</div>
                    <h3>Erreur</h3>
                    <p id="errorMessage"></p>
                    <button id="retryBtn" class="btn-secondary">R√©essayer</button>
                </div>
            </section>
        </main>

        <!-- Terminal lat√©ral -->
        <aside id="terminalPanel" class="terminal">
            <div class="terminal-header">
                <strong>Terminal</strong>
                <div class="terminal-controls">
                    <label class="term-filter"><input type="checkbox" id="filterInfo" checked> INFO</label>
                    <label class="term-filter"><input type="checkbox" id="filterWarn" checked> WARN</label>
                    <label class="term-filter"><input type="checkbox" id="filterError" checked> ERROR</label>
                    <input id="terminalSearch" class="term-search" type="text" placeholder="Rechercher‚Ä¶" />
                    <span id="terminalCounters" class="term-counters">I:0 W:0 E:0</span>
                    <button id="terminalAutoscroll" title="Auto-scroll">üîÅ</button>
                    <button id="terminalCopy" title="Copier">üìã</button>
                    <button id="terminalExport" title="T√©l√©charger JSON">üíæ</button>
                    <button id="terminalPause" title="Pause/lecture">‚è∏Ô∏è</button>
                    <button id="terminalClear" title="Effacer">üßπ</button>
                </div>
            </div>
            <pre id="terminalOutput" class="terminal-output" aria-live="polite"></pre>
        </aside>
        </div>

        <footer>
            <p>Mode sans serveur: Reddit public + Narration Web Speech</p>
            <p class="warning">‚ö†Ô∏è Contenu g√©n√©r√© automatiquement - Peut contenir des th√®mes d'horreur</p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
